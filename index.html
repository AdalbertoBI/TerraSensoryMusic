<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TerraSensoryMusic - Terra Eletr√¥nica</title>
    <meta name="description" content="Sistema de monitoramento MIDI para Terra Eletr√¥nica - Dados MIDI Reais">
    <meta name="keywords" content="MIDI, Arduino, Terra Eletr√¥nica, M√∫sica, Sensores, RF24">
    <meta name="author" content="Terra Eletr√¥nica">
    
    <!-- Chrome/PWA espec√≠fico -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="color-scheme" content="dark light">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://adalbertobi.github.io/TerraSensoryMusic/">
    <meta property="og:title" content="TerraSensoryMusic - Sistema MIDI Terra Eletr√¥nica">
    <meta property="og:description" content="Sistema de monitoramento MIDI para dispositivos Terra Eletr√¥nica">
    <meta property="og:image" content="https://adalbertobi.github.io/TerraSensoryMusic/preview.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://adalbertobi.github.io/TerraSensoryMusic/">
    <meta property="twitter:title" content="TerraSensoryMusic - Sistema MIDI Terra Eletr√¥nica">
    <meta property="twitter:description" content="Sistema de monitoramento MIDI para dispositivos Terra Eletr√¥nica">
    <meta property="twitter:image" content="https://adalbertobi.github.io/TerraSensoryMusic/preview.png">
    
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéµ</text></svg>">
    
    <!-- Chrome Compatibility Check -->
    <script>
        // Verificar compatibilidade do navegador
        if (!navigator.requestMIDIAccess) {
            console.warn('‚ö†Ô∏è Web MIDI API n√£o suportada neste navegador');
            document.addEventListener('DOMContentLoaded', function() {
                const banner = document.createElement('div');
                banner.style.cssText = `
                    position: fixed; top: 0; left: 0; right: 0; z-index: 10000;
                    background: #ff6b6b; color: white; padding: 10px; text-align: center;
                    font-family: Arial, sans-serif; font-size: 14px;
                `;
                banner.innerHTML = '‚ö†Ô∏è Este navegador n√£o suporta Web MIDI API. Use Chrome/Edge com HTTPS!';
                document.body.insertBefore(banner, document.body.firstChild);
            });
        }
        
        // Verificar se est√° em HTTPS (exceto localhost)
        if (location.protocol !== 'https:' && !location.hostname.match(/localhost|127\.0\.0\.1/)) {
            console.warn('‚ö†Ô∏è Web MIDI API requer HTTPS');
        }
    </script>
</head>
<body>
    <div class="container">
        <!-- Cabe√ßalho -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <h1>üéµ TerraSensoryMusic</h1>
                    <p>Terra Eletr√¥nica - Sistema de Monitoramento MIDI</p>
                </div>
                <div class="connection-status">
                    <div class="status-indicator" id="connectionStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">Desconectado</span>
                    </div>
                    <button id="connectBtn" class="btn btn-primary">Conectar MIDI</button>
                </div>
            </div>
            
            <!-- Sistema de Abas -->
            <div class="tab-navigation">
                <button class="tab-button active" data-tab="monitoring">
                    üéõÔ∏è Monitoramento
                </button>
                <button class="tab-button" data-tab="midi-terra">
                    üéØ Midi Terra
                </button>
            </div>
        </header>

        <!-- Canais MIDI -->
        <div class="channels-panel">
            <h3>üì° Canais MIDI</h3>
            <div class="channels-grid" id="channelsGrid">
                <!-- Canais ser√£o criados dinamicamente -->
                <div class="channel-card" id="channel-0">
                    <div class="channel-number">Canal 0</div>
                    <div class="channel-hex">CH 0</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-1">
                    <div class="channel-number">Canal 1</div>
                    <div class="channel-hex">CH 1</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-2">
                    <div class="channel-number">Canal 2</div>
                    <div class="channel-hex">CH 2</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-3">
                    <div class="channel-number">Canal 3</div>
                    <div class="channel-hex">CH 3</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-4">
                    <div class="channel-number">Canal 4</div>
                    <div class="channel-hex">CH 4</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-5">
                    <div class="channel-number">Canal 5</div>
                    <div class="channel-hex">CH 5</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-6">
                    <div class="channel-number">Canal 6</div>
                    <div class="channel-hex">CH 6</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-7">
                    <div class="channel-number">Canal 7</div>
                    <div class="channel-hex">CH 7</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-8">
                    <div class="channel-number">Canal 8</div>
                    <div class="channel-hex">CH 8</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-9">
                    <div class="channel-number">Canal 9</div>
                    <div class="channel-hex">CH 9</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-10">
                    <div class="channel-number">Canal 10</div>
                    <div class="channel-hex">CH 10</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-11">
                    <div class="channel-number">Canal 11</div>
                    <div class="channel-hex">CH 11</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-12">
                    <div class="channel-number">Canal 12</div>
                    <div class="channel-hex">CH 12</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-13">
                    <div class="channel-number">Canal 13</div>
                    <div class="channel-hex">CH 13</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-14">
                    <div class="channel-number">Canal 14</div>
                    <div class="channel-hex">CH 14</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
                <div class="channel-card" id="channel-15">
                    <div class="channel-number">Canal 15</div>
                    <div class="channel-hex">CH 15</div>
                    <div class="channel-status">Inativo</div>
                    <div class="channel-activity">
                        <div class="channel-activity-bar"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conte√∫do das Abas -->
        <div class="tab-content">
            <!-- Aba Monitoramento (ativa por padr√£o) -->
            <div class="tab-panel active" id="monitoring-panel">
                <!-- Painel de Controle -->
        <div class="control-panel">
            <div class="panel-section">
                <h3>Filtros</h3>
                <div class="filters">
                    <div class="filter-group">
                        <label for="channelFilter">Canal:</label>
                        <select id="channelFilter">
                            <option value="">Todos os canais</option>
                            <option value="0x90">Canal 0 (0x90)</option>
                            <option value="0x91">Canal 1 (0x91)</option>
                            <option value="0x92">Canal 2 (0x92)</option>
                            <option value="0x93">Canal 3 (0x93)</option>
                            <option value="0x94">Canal 4 (0x94)</option>
                            <option value="0x95">Canal 5 (0x95)</option>
                            <option value="0x96">Canal 6 (0x96)</option>
                            <option value="0x97">Canal 7 (0x97)</option>
                            <option value="0x98">Canal 8 (0x98)</option>
                            <option value="0x99">Canal 9 (0x99)</option>
                            <option value="0x9A">Canal 10 (0x9A)</option>
                            <option value="0x9B">Canal 11 (0x9B)</option>
                            <option value="0x9C">Canal 12 (0x9C)</option>
                            <option value="0x9D">Canal 13 (0x9D)</option>
                            <option value="0x9E">Canal 14 (0x9E)</option>
                            <option value="0x9F">Canal 15 (0x9F)</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="messageType">Tipo:</label>
                        <select id="messageType">
                            <option value="">Todos os tipos</option>
                            <option value="noteOn">Note On</option>
                            <option value="noteOff">Note Off</option>
                            <option value="controlChange">Control Change</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="slaveFilter">Slave:</label>
                        <select id="slaveFilter">
                            <option value="">Todos os slaves</option>
                            <option value="01">Slave 01</option>
                            <option value="02">Slave 02</option>
                            <option value="03">Slave 03</option>
                            <option value="04">Slave 04</option>
                            <option value="05">Slave 05</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="panel-section">
                <h3>Controles</h3>
                <div class="controls">
                    <button id="pauseBtn" class="btn btn-warning">Pausar</button>
                    <button id="clearLog" class="btn btn-danger">Limpar Log</button>
                    <button id="exportBtn" class="btn btn-success">Exportar</button>
                    <button id="diagnoseBtn" class="btn btn-secondary">üîç Diagnosticar</button>
                    <button id="rescanBtn" class="btn btn-primary">üîÑ Re-escanear</button>
                </div>
            </div>
            
            <div class="panel-section">
                <h3>Estat√≠sticas</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalMessages">0</div>
                        <div class="stat-label">Mensagens</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="messagesPerSecond">0</div>
                        <div class="stat-label">Msgs/seg</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="activeChannels">0</div>
                        <div class="stat-label">Canais Ativos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="connectedSlaves">0</div>
                        <div class="stat-label">Slaves</div>
                    </div>
                </div>
            </div>
        </div>

        

        <!-- Log de Mensagens -->
        <div class="log-panel">
            <div class="log-header">
                <h3>üìã Log de Mensagens MIDI</h3>
                <div class="log-info">
                    <span id="logCount">0 mensagens</span>
                    <span id="logSize">0 KB</span>
                    <label class="auto-scroll-label">
                        <input type="checkbox" id="autoScroll" checked>
                        Auto-scroll
                    </label>
                </div>
            </div>
            <div class="log-table">
                <div class="log-header-row">
                    <div class="log-col">Hora</div>
                    <div class="log-col">Canal</div>
                    <div class="log-col">Tipo</div>
                    <div class="log-col">Nota</div>
                    <div class="log-col">Velocity</div>
                    <div class="log-col">Slave</div>
                    <div class="log-col">Dados</div>
                </div>
                <div class="log-container" id="logContainer">
                    <div class="log-empty">üéµ TerraSensoryMusic aguardando conex√£o MIDI... Conecte seu dispositivo Terra!</div>
                </div>
            </div>
            </div>
            <!-- Fim da Aba Monitoramento -->

            <!-- Aba Midi Terra (oculta por padr√£o) -->
            <div class="tab-panel" id="midi-terra-panel">
                <div class="midi-terra-content">
                    <div class="welcome-terra">
                        <h2>üéØ Midi Terra - Terra Eletr√¥nica</h2>
                        <p>Painel dedicado para configura√ß√£o e controle do dispositivo Midi-Terra</p>
                        <div class="coming-soon">
                            <div class="coming-soon-icon">‚öôÔ∏è</div>
                            <h3>Em Desenvolvimento</h3>
                            <p>Funcionalidades espec√≠ficas do Midi Terra ser√£o adicionadas em breve.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Fim do Conte√∫do das Abas -->

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>¬© 2025 Terra Eletr√¥nica - TerraSensoryMusic</p>
                <div class="footer-links">
                    <span>Sistema de Monitoramento MIDI</span>
                </div>
            </div>
        </footer>

        <!-- Modal de Detalhes -->
        <div class="modal" id="messageModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Detalhes da Mensagem MIDI</h3>
                    <span class="modal-close" id="modalClose">&times;</span>
                </div>
                <div class="modal-body" id="modalBody">
                    <!-- Conte√∫do ser√° preenchido dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <!-- M√≥dulos do sistema -->
    <script src="js/components/diagnostic-system.js"></script>
    <script src="js/components/midi-detector.js"></script>
    <script src="js/components/ui-manager.js"></script>
    <script src="js/components/midi-parser.js"></script>
    <script src="js/terra-sensory-music.js"></script>
</body>
</html>